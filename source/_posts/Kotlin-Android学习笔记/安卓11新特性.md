---
title: 实习笔记-24
date: 2022-03-22 21:15:36
tags: Kotlin-Android 实习
categories: Kotlin-Android
toc: true
language: zh-CN
---

## 设备到设备文件传输
如果您的应用以 Android 11 或更高版本为目标平台，您将无法使用 allowBackup 属性停用应用文件的设备到设备迁移。系统会自动启用此功能。

不过，即使您的应用以 Android 11 或更高版本为目标平台，您也可以通过将 allowBackup 属性设为 false 来停用应用文件的云端备份和恢复。

## 非 SDK 接口限制

## 相机
媒体 intent 操作需要系统默认相机
从 Android 11 开始，只有预装的系统相机应用可以响应以下 intent 操作：

`android.media.action.VIDEO_CAPTURE`
`android.media.action.IMAGE_CAPTURE`
`android.media.action.IMAGE_CAPTURE_SECURE`
如果有多个预装的系统相机应用可用，系统会显示一个对话框，供用户选择应用。如果您希望自己的应用使用特定的第三方相机应用来代表其捕获图片或视频，可以通过为 intent 设置软件包名称或组件来使这些 intent 变得明确。

## 应用打包和安装

现在还必须使用 APK 签名方案 v2 或更高版本进行签名

## Toast
open fun setView(view: View!): Unit

Deprecated: Custom toast views are deprecated. Apps can create a standard text toast with the

Custom toast views are deprecated.

#### 以 Android 11 或更高版本为目标平台的应用会发现文本消息框受到以下负面影响：

- getView() 方法返回 null。
#### 以下方法的返回值并不反映实际值，因此您不应在应用中依赖于它们：
- getHorizontalMargin()
- getVerticalMargin()
- getGravity()
- getXOffset()
- getYOffset()
#### 以下方法是空操作，因此您的应用不应使用它们：
- setMargin()
- setGravity()

