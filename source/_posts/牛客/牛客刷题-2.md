---
title: 牛客刷题-2
date: 2024-09-03 21:15:36
tags: 
    - 牛客
    - 刷题
categories: 
    - 牛客
    - 刷题
toc: true
language: zh-CN
---

## 1.小美的平衡矩阵

<div data-v-5e687804="" class="" data-v-368446cc=""><div data-v-55713a8e="" data-v-5e687804="" class="tw-mb-5"><!---->  <div data-v-2b881dd3="" data-v-55713a8e="" class="question-info question-info"><div data-v-2b881dd3="" class="codingTitleClass tw-flex"><div data-v-2b881dd3="" class="tw-mr-1 tw-h-7 tw-leading-7">1.</div> <div data-v-2b881dd3="" class="commonPaperHtml tw-flex-1 tw-w-0">小美的平衡矩阵</div></div> <div data-v-2b881dd3="" class="commonPaperHtml codingContentClass">小美拿到了一个<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo>∗</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">n*n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.46528em;vertical-align:0em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>的矩阵，其中每个元素是 0 或者 1。<br>
小美认为一个矩形区域是完美的，当且仅当该区域内 0 的数量恰好等于 1 的数量。<br>
现在，小美希望你回答有多少个<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi><mo>∗</mo><mi>i</mi></mrow><annotation encoding="application/x-tex">i*i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>的完美矩形区域。你需要回答<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mo>≤</mo><mi>i</mi><mo>≤</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">1\leq i \leq n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.79549em;vertical-align:-0.13597em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>的所有答案。</div></div></div> <div data-v-5e687804="" class="description-wrap tw-mt-3"><div data-v-5e687804="">时间限制：C/C++ 1秒，其他语言2秒</div> <div data-v-5e687804="" class="tw-mt-2">空间限制：C/C++ 256M，其他语言512M</div></div> <div data-v-5e687804="" class="item-title">输入描述：</div> <pre data-v-5e687804="" class="description-wrap tw-whitespace-pre-wrap tw-break-all">第一行输入一个正整数<img src="https://hr.nowcoder.com/equation?tex=n" alt="n">，代表矩阵大小。<br>接下来的<img src="https://hr.nowcoder.com/equation?tex=n" alt="n">行，每行输入一个长度为<img src="https://hr.nowcoder.com/equation?tex=n" alt="n">的 01 串，用来表示矩阵。<br><img src="https://hr.nowcoder.com/equation?tex=1%5Cleq%20n%20%5Cleq%20200" alt="1\leq n \leq 200"></pre> <div data-v-5e687804="" class="item-title">输出描述：</div> <pre data-v-5e687804="" class="description-wrap tw-whitespace-pre-wrap tw-break-all">输出<img src="https://hr.nowcoder.com/equation?tex=n" alt="n">行，第<img src="https://hr.nowcoder.com/equation?tex=i" alt="i">行输出<img src="https://hr.nowcoder.com/equation?tex=i*i" alt="i*i">的完美矩形区域的数量。</pre> <div data-v-5e687804=""><div data-v-5e687804="" class="item-title">示例1</div> <div data-v-5e687804="" class="description-wrap"><div data-v-5e687804="" class="tw-flex tw-items-start tw-flex-wrap"><span data-v-5e687804="" class="tw-flex-shrink-0">输入例子：</span> <pre data-v-5e687804="" class="tw-whitespace-pre-wrap tw-break-all">4
1010
0101
1100
0011</pre></div> <div data-v-5e687804="" class="tw-mt-2 tw-flex tw-items-start tw-flex-wrap"><span data-v-5e687804="" class="tw-flex-shrink-0">输出例子：</span> <pre data-v-5e687804="" class="tw-whitespace-pre-wrap tw-break-all">0
7
0
1</pre></div> <!----></div></div> <!----></div>

```c++
#include <iostream>
#include <vector>
using namespace std;

int main() {
    int n;
    cin >> n;
    vector<vector<int>> preSum(n, vector<int>(n+1));
    for(int i = 0; i < n; i++) {
        string s;
        cin >> s;
        for(int j = 0; j < n; j++) {
            preSum[i][j+1] = preSum[i][j] + (s[j] - '0');
        }
    }
    for(int window = 1; window <= n; window++) {
        if(window & 1) {
            cout << "0\n";
            continue;
        }
        int perfect = 0;
        for(int j = 0; j <= n - window; j++) {
            int sum = 0;
            for(int i = 0; i < window; i++) {
                sum += preSum[i][window + j] - preSum[i][j];
            }
            if(sum * 2 == window * window) {
                perfect++;
            }
            for(int i = window; i < n; i++) {
                sum -= preSum[i - window][window + j] - preSum[i - window][j];
                sum += preSum[i][window + j] - preSum[i][j];
                if(sum * 2 == window * window) {
                    perfect++;
                }
            }
        }
        cout << perfect << "\n";
    }
}
```

## 2.小美的数组询问

<div data-v-5e687804="" class="" data-v-368446cc=""><div data-v-55713a8e="" data-v-5e687804="" class="tw-mb-5"><!---->  <div data-v-2b881dd3="" data-v-55713a8e="" class="question-info question-info"><div data-v-2b881dd3="" class="codingTitleClass tw-flex"><div data-v-2b881dd3="" class="tw-mr-1 tw-h-7 tw-leading-7">2.</div> <div data-v-2b881dd3="" class="commonPaperHtml tw-flex-1 tw-w-0">小美的数组询问</div></div> <div data-v-2b881dd3="" class="commonPaperHtml codingContentClass">小美拿到了一个由正整数组成的数组，但其中有一些元素是未知的（用 0 来表示）。<br>
现在小美想知道，如果那些未知的元素在区间<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><mi>l</mi><mo separator="true">,</mo><mi>r</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[l,r]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mclose">]</span></span></span></span>范围内随机取值的话，数组所有元素之和的最小值和最大值分别是多少？<br>
共有<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span></span></span></span>次询问。</div></div></div> <div data-v-5e687804="" class="description-wrap tw-mt-3"><div data-v-5e687804="">时间限制：C/C++ 1秒，其他语言2秒</div> <div data-v-5e687804="" class="tw-mt-2">空间限制：C/C++ 256M，其他语言512M</div></div> <div data-v-5e687804="" class="item-title">输入描述：</div> <pre data-v-5e687804="" class="description-wrap tw-whitespace-pre-wrap tw-break-all">第一行输入两个正整数<img src="https://hr.nowcoder.com/equation?tex=n%2Cq" alt="n,q">，代表数组大小和询问次数。<br>第二行输入<img src="https://hr.nowcoder.com/equation?tex=n" alt="n">个整数<img src="https://hr.nowcoder.com/equation?tex=a_i" alt="a_i">，其中如果输入的<img src="https://hr.nowcoder.com/equation?tex=a_i" alt="a_i">为 0，那么说明<img src="https://hr.nowcoder.com/equation?tex=a_i" alt="a_i">是未知的。<br>接下来的<img src="https://hr.nowcoder.com/equation?tex=q" alt="q">行，每行输入两个正整数 <img src="https://hr.nowcoder.com/equation?tex=l%2Cr" alt="l,r">，代表一次询问。<br><img src="https://hr.nowcoder.com/equation?tex=1%5Cleq%20n%2Cq%20%5Cleq%2010%5E5" alt="1\leq n,q \leq 10^5"><br><img src="https://hr.nowcoder.com/equation?tex=0%20%5Cleq%20a_i%20%5Cleq%2010%5E9" alt="0 \leq a_i \leq 10^9"><br><img src="https://hr.nowcoder.com/equation?tex=1%5Cleq%20l%20%5Cleq%20r%20%5Cleq%2010%5E9" alt="1\leq l \leq r \leq 10^9"></pre> <div data-v-5e687804="" class="item-title">输出描述：</div> <pre data-v-5e687804="" class="description-wrap tw-whitespace-pre-wrap tw-break-all">输出<img src="https://hr.nowcoder.com/equation?tex=q" alt="q">行，每行输出两个正整数，代表所有元素之和的最小值和最大值。</pre> <div data-v-5e687804=""><div data-v-5e687804="" class="item-title">示例1</div> <div data-v-5e687804="" class="description-wrap"><div data-v-5e687804="" class="tw-flex tw-items-start tw-flex-wrap"><span data-v-5e687804="" class="tw-flex-shrink-0">输入例子：</span> <pre data-v-5e687804="" class="tw-whitespace-pre-wrap tw-break-all">3 2
1 0 3
1 2
4 4</pre></div> <div data-v-5e687804="" class="tw-mt-2 tw-flex tw-items-start tw-flex-wrap"><span data-v-5e687804="" class="tw-flex-shrink-0">输出例子：</span> <pre data-v-5e687804="" class="tw-whitespace-pre-wrap tw-break-all">5 6
8 8</pre></div> <div data-v-5e687804="" class="tw-mt-2 tw-flex tw-items-start tw-flex-wrap"><span data-v-5e687804="" class="tw-flex-shrink-0">例子说明：</span> <pre data-v-5e687804="" class="example-desc tw-break-all tw-whitespace-pre-wrap">只有第二个元素是未知的。<br>第一次询问，数组最小的和是 1+1+3=5，最大的和是 1+2+3=6。<br>第二次询问，显然数组的元素和必然为 8。<br><div><br></div></pre></div></div></div> <!----></div>

```c++
#include <iostream>
using namespace std;

int main() {
    int n, q;
    cin >> n >> q;
    long long sum = 0;
    long long zeroCnt = 0;
    for(int i = 0; i < n; i++) {
        int ai;
        cin >> ai;
        zeroCnt += (ai == 0 ? 1 : 0);
        sum += ai;
    }
    for(int i = 0; i < q; i++) {
        int l, r;
        cin >> l >> r;
        cout << sum + zeroCnt*l << " " << sum + zeroCnt*r << "\n";
    }
}
```

## 3.小美的 MT

<div data-v-5e687804="" class="" data-v-368446cc=""><div data-v-55713a8e="" data-v-5e687804="" class="tw-mb-5"><!---->  <div data-v-2b881dd3="" data-v-55713a8e="" class="question-info question-info"><div data-v-2b881dd3="" class="codingTitleClass tw-flex"><div data-v-2b881dd3="" class="tw-mr-1 tw-h-7 tw-leading-7">3.</div> <div data-v-2b881dd3="" class="commonPaperHtml tw-flex-1 tw-w-0">小美的 MT</div></div> <div data-v-2b881dd3="" class="commonPaperHtml codingContentClass">MT 是美团的缩写，因此小美很喜欢这两个字母。<br>
现在小美拿到了一个仅由大写字母组成字符串，她可以最多操作<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span></span></span></span>次，每次可以修改任意一个字符。小美想知道，操作结束后最多共有多少个'M'和'T'字符？</div></div></div> <div data-v-5e687804="" class="description-wrap tw-mt-3"><div data-v-5e687804="">时间限制：C/C++ 1秒，其他语言2秒</div> <div data-v-5e687804="" class="tw-mt-2">空间限制：C/C++ 256M，其他语言512M</div></div> <div data-v-5e687804="" class="item-title">输入描述：</div> <pre data-v-5e687804="" class="description-wrap tw-whitespace-pre-wrap tw-break-all">第一行输入两个正整数<img src="https://hr.nowcoder.com/equation?tex=n%2Ck" alt="n,k">，代表字符串长度和操作次数。<br>第二行输入一个长度为<img src="https://hr.nowcoder.com/equation?tex=n" alt="n">的、仅由大写字母组成的字符串。<br><img src="https://hr.nowcoder.com/equation?tex=1%5Cleq%20k%20%5Cleq%20n%20%5Cleq%2010%5E5" alt="1\leq k \leq n \leq 10^5"></pre> <div data-v-5e687804="" class="item-title">输出描述：</div> <pre data-v-5e687804="" class="description-wrap tw-whitespace-pre-wrap tw-break-all">输出<span>操作结束后最多共有多少个'M'和'T'字符。</span></pre> <div data-v-5e687804=""><div data-v-5e687804="" class="item-title">示例1</div> <div data-v-5e687804="" class="description-wrap"><div data-v-5e687804="" class="tw-flex tw-items-start tw-flex-wrap"><span data-v-5e687804="" class="tw-flex-shrink-0">输入例子：</span> <pre data-v-5e687804="" class="tw-whitespace-pre-wrap tw-break-all">5 2
MTUAN</pre></div> <div data-v-5e687804="" class="tw-mt-2 tw-flex tw-items-start tw-flex-wrap"><span data-v-5e687804="" class="tw-flex-shrink-0">输出例子：</span> <pre data-v-5e687804="" class="tw-whitespace-pre-wrap tw-break-all">4</pre></div> <div data-v-5e687804="" class="tw-mt-2 tw-flex tw-items-start tw-flex-wrap"><span data-v-5e687804="" class="tw-flex-shrink-0">例子说明：</span> <pre data-v-5e687804="" class="example-desc tw-break-all tw-whitespace-pre-wrap">修改第三个和第五个字符，形成的字符串为 MTTAM，这样共有 4 个'M'和'T'。</pre></div></div></div> <!----></div>

```c++
#include <iostream>
using namespace std;

int main() {
    int n, k;
    cin >> n >> k;
    int cnt = 0;
    cin.get();
    for(int i = 0; i < n; i++) {
        char c = cin.get();
        if(c != 'M' && c != 'T') cnt++;
    }
    cout <<  n - cnt + min(k, cnt) << endl;
    return 0;
}
// 64 位输出请用 printf("%lld")
```

## 4. 小美的朋友关系

```c++
#include <bits/stdc++.h>
using namespace std;

class UnionSet {
    vector<int> array;
    public:
    UnionSet(vector<set<int>> graph, int n): array(n) {
        iota(array.begin(), array.end(), 0);
        for(int u = 0; u < n; u++) {
            for(int v : graph[u]) {
                Union(u, v);
            }
        }
    }
    UnionSet(const vector<set<int>>& graph): UnionSet(graph, graph.size()) {}
    UnionSet(int n): array(n) {
        iota(array.begin(), array.end(), 0);
    }
    int Find(int u) {
        return u == array[u] ? u : (array[u] = Find(array[u]));
    }
    void Union(int u, int v) {
        array[Find(u)] = Find(v);
    }
    bool Query(int u, int v) {
        return Find(u) == Find(v);
    }
};

int main() {
    int n, m, q;
    cin >> n >> m >> q;
    vector<set<int>> graph(n);
    for(int i = 0; i < m; i++) {
        int u, v;
        cin >> u >> v;
        u--;
        v--;
        graph[u].insert(v);
        graph[v].insert(u);
    }
    vector<tuple<int, int, int>> ops;
    for(int i = 0; i < q; i++) {
        int op, u, v;
        cin >> op >> u >> v;
        u--;
        v--;
        ops.emplace_back(op, u, v);
        if(op == 1) {
            graph[u].erase(v);
            graph[v].erase(u);
        }
    }
    UnionSet unionSet(graph, n);
    vector<int> ans;
    for(auto ite = ops.rbegin(); ite != ops.rend(); ite++) {
        auto [op, u, v] = *ite;
        if(op == 1) {
            unionSet.Union(u, v);
        } else if(op == 2) {
            ans.push_back(unionSet.Query(u, v));
        }
    }
    for(auto ite = ans.rbegin(); ite != ans.rend(); ite++) {
        cout << (*ite ? "Yes\n" : "No\n");
    }
    return 0;
}
```

- 反向并查集，倒着计算答案
- 先把要删除的关系全部删除，然后倒序将删除的关系还原

## 5 小美的区间删除

<div class="left" data-v-368446cc=""><div data-v-5e687804="" data-v-368446cc="" class=""><div class="tw-mb-5" data-v-55713a8e="" data-v-5e687804=""><!---->  <div class="question-info question-info" data-v-2b881dd3="" data-v-55713a8e=""><div class="codingTitleClass tw-flex" data-v-2b881dd3=""><div class="tw-mr-1 tw-h-7 tw-leading-7" data-v-2b881dd3="">5.</div> <div class="commonPaperHtml tw-flex-1 tw-w-0" data-v-2b881dd3="">小美的区间删除</div></div> <div data-v-2b881dd3="" class="commonPaperHtml codingContentClass">小美拿到了一个大小为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>的数组，她希望删除一个区间后，使得剩余所有元素的乘积末尾至少有<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span></span></span></span>个 0。小美想知道，一共有多少种不同的删除方案？</div></div></div> <div class="description-wrap tw-mt-3" data-v-5e687804=""><div data-v-5e687804="">时间限制：C/C++ 1秒，其他语言2秒</div> <div class="tw-mt-2" data-v-5e687804="">空间限制：C/C++ 256M，其他语言512M</div></div> <div class="item-title" data-v-5e687804="">输入描述：</div> <pre class="description-wrap tw-whitespace-pre-wrap tw-break-all" data-v-5e687804="">第一行输入两个正整数<img src="https://hr.nowcoder.com/equation?tex=n%2Ck" alt="n,k">。<br>第二行输入<img src="https://hr.nowcoder.com/equation?tex=n" alt="n">个正整数<img src="https://hr.nowcoder.com/equation?tex=a_i" alt="a_i">，代表小美拿到的数组。<br><img src="https://hr.nowcoder.com/equation?tex=1%5Cleq%20n%2Ck%20%5Cleq%2010%5E5" alt="1\leq n,k \leq 10^5"><br><img src="https://hr.nowcoder.com/equation?tex=1%5Cleq%20a_i%20%5Cleq%2010%5E9" alt="1\leq a_i \leq 10^9"></pre> <div class="item-title" data-v-5e687804="">输出描述：</div> <pre class="description-wrap tw-whitespace-pre-wrap tw-break-all" data-v-5e687804="">一个整数，代表删除的方案数。</pre> <div data-v-5e687804=""><div class="item-title" data-v-5e687804="">示例1</div> <div class="description-wrap" data-v-5e687804=""><div class="tw-flex tw-items-start tw-flex-wrap" data-v-5e687804=""><span class="tw-flex-shrink-0" data-v-5e687804="">输入例子：</span> <pre class="tw-whitespace-pre-wrap tw-break-all" data-v-5e687804="">5 2
2 5 3 4 20</pre></div> <div class="tw-mt-2 tw-flex tw-items-start tw-flex-wrap" data-v-5e687804=""><span class="tw-flex-shrink-0" data-v-5e687804="">输出例子：</span> <pre class="tw-whitespace-pre-wrap tw-break-all" data-v-5e687804="">4</pre></div> <div class="tw-mt-2 tw-flex tw-items-start tw-flex-wrap" data-v-5e687804=""><span class="tw-flex-shrink-0" data-v-5e687804="">例子说明：</span> <pre class="example-desc tw-break-all tw-whitespace-pre-wrap" data-v-5e687804="">第一个方案，删除[3]。<br>第二个方案，删除[4]。<br>第三个方案，删除[3,4]。<br>第四个方案，删除[2]。<br></pre></div></div></div> <!----></div></div>

```c++
#include <bits/stdc++.h>
using namespace std;

int cntOfFact(long long n, long long fact) {
    int cnt = 0;
    long long facts[32] = {0};
    int base = 0;
    facts[0] = fact;
    while(facts[base] < n) {
        base++;
        facts[base] = facts[base-1] * facts[base-1];
    }
    for(; base >= 0; base--) {
        if(n / facts[base] > 0 && n % facts[base] == 0) {
            cnt += 1 << base;
            n /= facts[base];
        }
    }
    return cnt;
}
int main() {
    int n, k;
    cin >> n >> k;
    vector<int> arr(n);
    vector<int> cntOf2(n+1), cntOf5(n+1);
    for(int i = 0; i < n; i++) {
        cin >> arr[i];
        cntOf2[i+1] = cntOfFact(arr[i], 2) + cntOf2[i];
        cntOf5[i+1] = cntOfFact(arr[i], 5) + cntOf5[i];
    }
    int canDelete2 = cntOf2[n] - k;
    int canDelete5 = cntOf5[n] - k;
    int start = 0;
    long long ans = 0;
    for(int end = 1; end <= n; end++) {
        while(start < end && (cntOf2[end] - cntOf2[start] > canDelete2 || cntOf5[end] - cntOf5[start] > canDelete5)) {
            start++;
        }

        ans += end - start;
    }
    cout << ans << endl;
    return 0;
}
// 64 位输出请用 printf("%lld")
```